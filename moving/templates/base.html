{% load bootstrap4 %}
{% load static %}
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  {% block head %}
	{% endblock head %}
	<!-- 파비콘 -->
  <link rel="shortcut icon" href="{% static 'accounts/favicon/google-glasses.png' %}">
  
  <!-- 부트스트랩-->
  {% bootstrap_css %}
  <!-- 폰트어썸 -->
  <script src="https://kit.fontawesome.com/b9444c6aee.js" crossorigin="anonymous"></script>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

	<link rel="stylesheet" href="{% static 'accounts/css/first.css' %}">
	<title>Moving</title>
  <style>
	
	.suj {
		background-color: #ff0000;
	}
	
	.sujee
	{
		background-color:blue;
		position:relative;
	}
	
	.bluck 
	{
		width:100%;
		height:200px;
	}
	
	.modal, .modal-backdrop {
			position: absolute !important;
	}
	a:link {
		text-decoration: none;
		color: #000;
	}
	a:hover {
		text-decoration: none;
	}
	a:visited {
		text-decoration: none;
	}
	a:active {
		text-decoration: none;
	}

  </style>
</head>

<body>

  <!-- nav--><br><br><br><br>
	<div class="container">
		<nav>
			<div class="nav simple-tab-nav " id="nav-tab" role="tablist">
				<a class="nav-item nav-link active" id="nav-movie-tab" href="{% url 'movies:list' %}" role="tab" aria-controls="nav-home" aria-selected="true">Movies</a>
				{% if user.is_authenticated %}
					<a class="nav-item nav-link" id="nav-logout-tab" href="{% url 'accounts:logout' %}" role="tab" aria-controls="nav-profile" aria-selected="false">LogOut</a>
					<a class="nav-item nav-link" id="nav-profile-tab" href="{% url 'accounts:user_detail' user.pk %}" role="tab" aria-controls="nav-profile" aria-selected="false">Profile</a>
				{% else %}
					<a class="nav-item nav-link" id="nav-signup-tab" href="{% url 'accounts:signup' %}" role="tab" aria-controls="nav-contact" aria-selected="false">SignUp</a>
					<a class="nav-item nav-link" id="nav-login-tab" href="{% url 'accounts:login' %}" role="tab" aria-controls="nav-contact" aria-selected="false">Login</a>
				{% endif %}
			</div>
		</nav>
		<!--
		<div class="tab-content" id="nav-tabContent">
			<div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-movie-tab">
				<p> One  ipsum dolor, sit amet consectetur adipisicing elit. Autem, sint. </p>
			</div>
			<div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
				<p> Two sum dolor, sit amet consectetur adipisicing elit. Autem, sint. </p>
			</div>
			<div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-signup-tab">
				<p> Three m dolor, sit amet consectetur adipisicing elit. Autem, sint. </p>
			</div>
		</div>
		-->
	</div>

  <div class="container">
    {% block content %}
    {% endblock content %}
  </div>

  <!-- bootstrap -->
  {% bootstrap_javascript jquery='full' %}

	<script>
  const likebuttons = document.querySelectorALl('.like-button')
		likebuttons.forEach(button => {
			button.addEventListener('click', function (event) {
				const movieId = event.target.dataset.id
				axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest'
				axios.defaults.xsrfCookieName = 'csrftoken'
				axios.defaults.xsrfHeaderName = 'X-CSRFToken'
				axios.post(`/movies/${movieId}/like/`)
					.then(response => {
						document.querySelector(`#like-count-${movieId}`).innerText = response.data.count
						if (response.data.liked) {
							event.target.style.color = 'crimson'
						} else {
							event.target.style.color = 'black'
						}
					})
					.catch(error => console.log(error))
			})
		})
	</script>

</body>

</html>